import{j as e}from"./ui-BG7jjlrC.js";import{r as p}from"./vendor-CsPsgsBv.js";import{b as A,u as b,c as m}from"./query-C_TmXHuV.js";import{d as I,a as z,C as N,h as _,i as w,j as C,k as a,I as t,T as v,f as r,X as g,P as R,g as B,s as o}from"./index-CvhVXczW.js";import{S as M}from"./square-pen-PyxYW7o-.js";import{T as U}from"./trash-2-ylsRDHL7.js";import"./router-J7O6VmFe.js";import"./utils-EL5wpLGY.js";import"./supabase-DoZrjKS4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=I("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function ee(){const[q,u]=p.useState(null),[h,x]=p.useState(null),[F,j]=p.useState(!1),{toast:l}=z(),d=A(),{data:k,isLoading:S}=b({queryKey:["adminAboutContent"],queryFn:async()=>{const{data:s,error:i}=await o.from("about_content").select("section, title, content").order("section");if(i)throw i;return s}}),{data:T,isLoading:E}=b({queryKey:["adminTeamMembers"],queryFn:async()=>{const{data:s,error:i}=await o.from("team_members").select("*").eq("is_active",!0).order("display_order");if(i)throw i;return s}}),L=m({mutationFn:async({section:s,title:i,content:n})=>{const{error:c}=await o.from("about_content").update({title:i,content:n}).eq("section",s);if(c)throw c},onSuccess:()=>{d.invalidateQueries({queryKey:["adminAboutContent"]}),d.invalidateQueries({queryKey:["aboutContent"]}),l({title:"Content updated successfully"}),u(null)},onError:s=>{l({title:"Error updating content",description:s.message,variant:"destructive"})}}),V=m({mutationFn:async s=>{const{error:i}=await o.from("team_members").insert([{...s,is_active:!0}]);if(i)throw i},onSuccess:()=>{d.invalidateQueries({queryKey:["adminTeamMembers"]}),d.invalidateQueries({queryKey:["teamMembers"]}),l({title:"Team member added successfully"}),j(!1)},onError:s=>{l({title:"Error adding team member",description:s.message,variant:"destructive"})}}),K=m({mutationFn:async({id:s,...i})=>{const{error:n}=await o.from("team_members").update(i).eq("id",s);if(n)throw n},onSuccess:()=>{d.invalidateQueries({queryKey:["adminTeamMembers"]}),d.invalidateQueries({queryKey:["teamMembers"]}),l({title:"Team member updated successfully"}),x(null)},onError:s=>{l({title:"Error updating team member",description:s.message,variant:"destructive"})}}),Q=m({mutationFn:async s=>{const{error:i}=await o.from("team_members").update({is_active:!1}).eq("id",s);if(i)throw i},onSuccess:()=>{d.invalidateQueries({queryKey:["adminTeamMembers"]}),d.invalidateQueries({queryKey:["teamMembers"]}),l({title:"Team member removed successfully"})},onError:s=>{l({title:"Error removing team member",description:s.message,variant:"destructive"})}}),D=s=>{s.preventDefault();const i=new FormData(s.currentTarget),n=i.get("section"),c=i.get("title"),P=i.get("content");L.mutate({section:n,title:c,content:P})},f=s=>{s.preventDefault();const i=new FormData(s.currentTarget),n={name:i.get("name"),position:i.get("position"),bio:i.get("bio")||null,profile_image:i.get("profile_image")||null,email:i.get("email")||null,linkedin_url:i.get("linkedin_url")||null,display_order:parseInt(i.get("display_order"))||0};h?K.mutate({id:h,...n}):V.mutate(n)};return S||E?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold",children:"About Page Management"})}),e.jsxs(N,{children:[e.jsx(_,{children:e.jsx(w,{children:"Page Content"})}),e.jsx(C,{className:"space-y-4",children:k?.map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:q===s.section?e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsx("input",{type:"hidden",name:"section",value:s.section}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"title",children:"Title"}),e.jsx(t,{id:"title",name:"title",defaultValue:s.title,required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"content",children:"Content"}),e.jsx(v,{id:"content",name:"content",defaultValue:s.content,rows:4,required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{type:"submit",size:"sm",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs(r,{type:"button",variant:"outline",size:"sm",onClick:()=>u(null),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>u(s.section),children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Edit"]})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.content})]})},s.section))})]}),e.jsxs(N,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{children:"Team Members"}),e.jsxs(r,{onClick:()=>j(!0),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Add Member"]})]})}),e.jsxs(C,{className:"space-y-4",children:[F&&e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Add New Team Member"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",children:"Name"}),e.jsx(t,{id:"name",name:"name",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"position",children:"Position"}),e.jsx(t,{id:"position",name:"position",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"bio",children:"Bio"}),e.jsx(v,{id:"bio",name:"bio",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"email",children:"Email"}),e.jsx(t,{id:"email",name:"email",type:"email"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"linkedin_url",children:"LinkedIn URL"}),e.jsx(t,{id:"linkedin_url",name:"linkedin_url",type:"url"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"profile_image",children:"Profile Image URL"}),e.jsx(t,{id:"profile_image",name:"profile_image",type:"url"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"display_order",children:"Display Order"}),e.jsx(t,{id:"display_order",name:"display_order",type:"number",defaultValue:"0"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{type:"submit",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs(r,{type:"button",variant:"outline",onClick:()=>j(!1),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})]}),T?.map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:h===s.id?e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",children:"Name"}),e.jsx(t,{id:"name",name:"name",defaultValue:s.name,required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"position",children:"Position"}),e.jsx(t,{id:"position",name:"position",defaultValue:s.position,required:!0})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"bio",children:"Bio"}),e.jsx(v,{id:"bio",name:"bio",defaultValue:s.bio||"",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"email",children:"Email"}),e.jsx(t,{id:"email",name:"email",type:"email",defaultValue:s.email||""})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"linkedin_url",children:"LinkedIn URL"}),e.jsx(t,{id:"linkedin_url",name:"linkedin_url",type:"url",defaultValue:s.linkedin_url||""})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"profile_image",children:"Profile Image URL"}),e.jsx(t,{id:"profile_image",name:"profile_image",type:"url",defaultValue:s.profile_image||""})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"display_order",children:"Display Order"}),e.jsx(t,{id:"display_order",name:"display_order",type:"number",defaultValue:s.display_order})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{type:"submit",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs(r,{type:"button",variant:"outline",onClick:()=>x(null),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:s.profile_image||"/placeholder.svg",alt:s.name,className:"w-12 h-12 rounded-full object-cover",onError:i=>{i.target.src="/placeholder.svg"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx(B,{variant:"outline",children:s.position}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Order: ",s.display_order]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>x(s.id),children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(r,{variant:"destructive",size:"sm",onClick:()=>Q.mutate(s.id),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})},s.id))]})]})]})}export{ee as AboutManagementTab,ee as default};
