import{j as a}from"./ui-CqCCPo1Y.js";import{r as m}from"./vendor-CsPsgsBv.js";import{c as w,C as x,e as C,f as S,h,I as L,B as f,d as y,a as z,s as j,u as A}from"./index-Cz0ZLwjf.js";import{L as E}from"./Layout-LrLnQRNT.js";import{M as _,A as F}from"./AuthRedirect-CLQa6cxj.js";import{S as v}from"./search-BK2555rC.js";import{L as N}from"./router-J7O6VmFe.js";import{M as D,G as I}from"./map-pin-C8gF0LSJ.js";import{D as M}from"./dollar-sign-CUlpiUT9.js";import{U as T}from"./dialog-JXTE8grn.js";import"./query-2sWkym1G.js";import"./supabase-DoZrjKS4.js";import"./utils-EL5wpLGY.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=w("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function R({searchQuery:e,selectedSpecialization:s,onSearchChange:r,onSpecializationChange:l}){return a.jsxs(x,{className:"mb-8 bg-white dark:bg-[#1a1a1a] border-gray-200 dark:border-[#2a2a2a]",children:[a.jsx(C,{className:"pb-4",children:a.jsxs(S,{className:"flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[a.jsx(v,{className:"w-5 h-5 text-[#025803]"}),"Find the Right Professional"]})}),a.jsx(h,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500",size:18}),a.jsx(L,{placeholder:"Search by name, location, or specialty...",className:"pl-10 bg-gray-50 dark:bg-[#0a0a0a] border-gray-200 dark:border-[#2a2a2a] text-gray-900 dark:text-gray-100",value:e,onChange:n=>r(n.target.value)})]}),a.jsxs("select",{className:"w-full p-3 border border-gray-200 dark:border-[#2a2a2a] rounded-md bg-gray-50 dark:bg-[#0a0a0a] text-gray-900 dark:text-gray-100",value:s,onChange:n=>l(n.target.value),children:[a.jsx("option",{value:"",children:"All Specializations"}),a.jsx("option",{value:"Anxiety",children:"Anxiety"}),a.jsx("option",{value:"Depression",children:"Depression"}),a.jsx("option",{value:"Trauma",children:"Trauma"}),a.jsx("option",{value:"Relationships",children:"Relationships"}),a.jsx("option",{value:"Addiction",children:"Addiction"})]}),a.jsxs(f,{className:"bg-[#025803] hover:bg-[#014502] text-white",children:[a.jsx(P,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})]})})]})}function B({consultant:e}){const s="https://raw.githubusercontent.com/Our-Minds/our-minds.github.io/refs/heads/main/public/assets/default.png";return a.jsxs(x,{className:"group hover:shadow-lg transition-all duration-300 bg-white dark:bg-[#1a1a1a] border-gray-200 dark:border-[#2a2a2a] hover:border-[#025803] dark:hover:border-[#025803] overflow-hidden",children:[a.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[a.jsx("img",{src:e.profile_image?e.profile_image:s,alt:e.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:r=>{r.target.src=s}}),a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx(y,{className:`${e.available?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-[#2a2a2a] text-gray-800 dark:text-gray-300"}`,children:e.available?"Available":"Busy"})})]}),a.jsxs(h,{className:"p-6",children:[a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-lg mb-2",children:e.name})}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[a.jsx(D,{className:"w-4 h-4 mr-2 text-[#025803]"}),a.jsx("span",{className:"text-sm",children:e.location})]}),a.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[a.jsx(I,{className:"w-4 h-4 mr-2 text-[#025803]"}),a.jsx("span",{className:"text-sm",children:e.languages.join(", ")})]}),a.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[a.jsx(M,{className:"w-4 h-4 mr-2 text-[#025803]"}),a.jsxs("span",{className:"text-sm font-medium",children:["$",e.hourly_rate,"/hour"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Specializations"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.specialization?.slice(0,3).map(r=>a.jsx(y,{variant:"outline",className:"text-xs border-gray-200 dark:border-[#2a2a2a] text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-[#2a2a2a]",children:r},r)),e.specialization?.length>3&&a.jsxs(y,{variant:"outline",className:"text-xs border-gray-200 dark:border-[#2a2a2a] text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-[#2a2a2a]",children:["+",e.specialization.length-3," more"]})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 line-clamp-3",children:e.bio}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(N,{to:`/book-session/${e.id}`,children:a.jsx(f,{className:"w-full bg-[#025803] hover:bg-[#014502] text-white",children:"Book Session"})}),a.jsx(N,{to:`/profile/${e.id}`,children:a.jsxs(f,{variant:"outline",className:"w-full border-gray-200 dark:border-[#2a2a2a] text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-[#2a2a2a]",children:[a.jsx(_,{className:"w-4 h-4 mr-2"}),"View Profile"]})})]})]})]})}function U({consultants:e,isLoading:s}){return s?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((r,l)=>a.jsxs(x,{className:"animate-pulse bg-white dark:bg-[#1a1a1a] border-gray-200 dark:border-[#2a2a2a]",children:[a.jsx("div",{className:"aspect-[4/3] bg-gray-200 dark:bg-[#2a2a2a] rounded-t-lg"}),a.jsx(h,{className:"p-6",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-[#2a2a2a] rounded w-32"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-[#2a2a2a] rounded w-24"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-[#2a2a2a] rounded"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-[#2a2a2a] rounded w-3/4"})]})})]},l))}):e.length===0?a.jsx(x,{className:"text-center py-12 bg-white dark:bg-[#1a1a1a] border-gray-200 dark:border-[#2a2a2a]",children:a.jsxs(h,{children:[a.jsx(T,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No consultants found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Try adjusting your search criteria or browse all available professionals."})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(r=>a.jsx(B,{consultant:r},r.id))})}function G(){const[e,s]=m.useState([]),[r,l]=m.useState(!0),{toast:n}=z();return m.useEffect(()=>{(async()=>{try{l(!0),console.log("Fetching consultants...");const{data:i,error:d}=await j.from("consultants").select("*").eq("approval_status","approved");if(d)throw console.error("Error fetching consultants:",d),d;if(console.log("Consultants data:",i),!i||i.length===0){console.log("No approved consultants found"),s([]);return}const u=i.map(t=>t.id),{data:p,error:o}=await j.from("users").select("id, name, email, profile_image").in("id",u);if(o)throw console.error("Error fetching users:",o),o;console.log("Users data:",p);const c=i.map(t=>{const b=p?.find(k=>k.id===t.id);return{id:t.id,name:b?.name||"Unknown",email:b?.email||"",profile_image:b?.profile_image||"",specialization:t.specialization||[],languages:t.languages||[],location:t.location||"",bio:t.bio||"",hourly_rate:t.hourly_rate||0,available:t.available||!1}});console.log("Transformed consultant data:",c),s(c)}catch(i){console.error("Error in fetchConsultants:",i),n({title:"Failed to load consultants",description:i.message||"Could not retrieve consultants from the database",variant:"destructive"})}finally{l(!1)}})()},[n]),{consultants:e,isLoading:r}}function ea(){const{isAuthenticated:e}=A(),{consultants:s,isLoading:r}=G(),[l,n]=m.useState([]),[g,i]=m.useState(""),[d,u]=m.useState("");return m.useEffect(()=>{(()=>{let o=s;g&&(o=o.filter(c=>c.name.toLowerCase().includes(g.toLowerCase())||c.location.toLowerCase().includes(g.toLowerCase())||c.specialization.some(t=>t.toLowerCase().includes(g.toLowerCase())))),d&&(o=o.filter(c=>c.specialization.includes(d))),n(o)})()},[s,g,d]),e?a.jsx(E,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a]",children:a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Find Your Mental Health Professional"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Connect with qualified consultants who understand your needs and can provide personalized support for your mental health journey."})]}),a.jsx(R,{searchQuery:g,selectedSpecialization:d,onSearchChange:i,onSpecializationChange:u}),a.jsx(U,{consultants:l,isLoading:r})]})})}):a.jsx(F,{})}export{ea as ConsultPage,ea as default};
