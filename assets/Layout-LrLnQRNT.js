import{j as e}from"./ui-CqCCPo1Y.js";import{u as W,L as h,a as F}from"./router-J7O6VmFe.js";import{c as v,L as k,B as f,I as z,T as Y,a as V,u as D,s as p,w as K,b as E}from"./index-Cz0ZLwjf.js";import{i as G,d as Q,e as Z,f as J,g as X,h as ee,D as te,a as ae,b as se,j as re,k as L,c as T,M as ne,U as le}from"./dialog-JXTE8grn.js";import{r as m}from"./vendor-CsPsgsBv.js";import{u as oe}from"./query-2sWkym1G.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=v("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=v("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=v("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=v("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=v("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=v("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=v("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=v("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=v("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function ue({imagePreview:s,onImageSelect:t,onImageRemove:r}){const a=l=>{l.target.files&&l.target.files[0]&&t(l.target.files[0])};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"coverImage",children:"Cover Image"}),e.jsx("div",{className:"flex items-center gap-4",children:s?e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsx("img",{src:s,alt:"Story cover",className:"w-full h-full object-cover rounded-lg"}),e.jsx(f,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1",onClick:r,children:"Ã—"})]}):e.jsxs("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center",children:[e.jsx(z,{type:"file",id:"coverImage",accept:"image/*",onChange:a,className:"hidden"}),e.jsxs("label",{htmlFor:"coverImage",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(xe,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500 mt-2",children:"Upload Image"})]})]})})]})}const O=[{value:"mental",label:"Mental Health"},{value:"control",label:"Self Control"},{value:"drugs",label:"Substance Abuse"},{value:"life",label:"Life Skills"},{value:"anxiety",label:"Anxiety"},{value:"depression",label:"Depression"}];function ge({selectedTag:s,onTagChange:t}){return e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"tagType",children:"Primary Tag"}),e.jsx("select",{id:"tagType",name:"tagType",className:"w-full h-10 pl-3 pr-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mental-green-500",value:s,onChange:t,children:O.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})}function pe({title:s,snippet:t,content:r,onInputChange:a}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"title",children:"Story Title"}),e.jsx(z,{id:"title",name:"title",value:s,onChange:a,placeholder:"Enter a title for your story",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"snippet",children:"Short Description"}),e.jsx(z,{id:"snippet",name:"snippet",value:t,onChange:a,placeholder:"A brief description that will appear in previews"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional - will use the beginning of your story if left blank"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"content",children:"Story Content"}),e.jsx(Y,{id:"content",name:"content",value:r,onChange:a,placeholder:"Share your story...",className:"min-h-[200px]",required:!0})]})]})}function fe({onClose:s,story:t}){const{toast:r}=V(),a=W(),{user:l}=D(),[x,g]=m.useState(!1),[o,b]=m.useState({title:t?.title||"",snippet:t?.snippet||"",content:t?.content||"",tags:t?.tags||["Mental Health"],tagType:t?.tag_type||"mental",coverImage:t?.cover_image||""}),[n,u]=m.useState(null),[S,y]=m.useState(t?.cover_image||"");m.useEffect(()=>{t&&(y(t.cover_image),b({title:t.title,snippet:t.snippet,content:t.content,tags:t.tags,tagType:t.tag_type,coverImage:t.cover_image}))},[t]);const N=c=>{const{name:i,value:j}=c.target;b(d=>({...d,[i]:j}))},M=c=>{u(c),y(URL.createObjectURL(c)),b(i=>({...i,coverImage:URL.createObjectURL(c)}))},B=()=>{u(null),y(""),b(c=>({...c,coverImage:""}))},H=c=>{const i=c.target.value,j=O.find(d=>d.value===i)?.label||"";b(d=>({...d,tagType:i,tags:[j,...d.tags.slice(1)]}))},R=async c=>{try{const i=c.name.split(".").pop(),d=`${`${Math.random().toString(36).substring(2,15)}.${i}`}`,{error:w}=await p.storage.from("story_images").upload(d,c);if(w)throw w;const{data:{publicUrl:C}}=p.storage.from("story_images").getPublicUrl(d);return C}catch(i){throw console.error("Error uploading image:",i),i}},$=async c=>{if(c.preventDefault(),!l){r({title:"Authentication required",description:"You must be logged in to create a story",variant:"destructive"});return}if(!o.title||!o.content){r({title:"Missing information",description:"Please provide a title and content for your story",variant:"destructive"});return}g(!0);try{let i=o.coverImage;n&&(i=await R(n));const{data:j}=await p.auth.getSession();if(!j.session)throw new Error("You must be logged in to create a story");const d={title:o.title,snippet:o.snippet||o.content.slice(0,100)+"...",content:o.content,cover_image:i,author_id:l.id,tags:o.tags,tag_type:o.tagType,is_featured:t?t.is_featured:!1,published_at:t?t.published_at:new Date().toISOString()};let w;t?w=await p.from("stories").update(d).eq("id",t.id).eq("author_id",l.id).select("id").single():w=await p.from("stories").insert(d).select("id").single();const{data:C,error:I}=w;if(I)throw console.error("Supabase error details:",I),I;r({title:t?"Story updated!":"Story published!",description:t?"Your story has been updated successfully":"Your story has been published successfully"}),s(),setTimeout(()=>{t?window.location.reload():a(`/story/${C.id}`)},500)}catch(i){console.error("Error creating/updating story:",i),r({title:t?"Failed to update story":"Failed to create story",description:i?.message||"There was an error. Please try again.",variant:"destructive"})}finally{g(!1)}};return e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{imagePreview:S,onImageSelect:M,onImageRemove:B}),e.jsx(pe,{title:o.title,snippet:o.snippet,content:o.content,onInputChange:N}),e.jsx(ge,{selectedTag:o.tagType,onTagChange:H})]}),e.jsxs(G,{className:"pt-4 border-t border-border/30 flex gap-3",children:[e.jsx(f,{type:"button",variant:"outline",onClick:s,className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsx(f,{type:"submit",disabled:x,className:"flex-1 sm:flex-none bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:x?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),t?"Updating...":"Publishing..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsx(q,{className:"w-4 h-4"}):e.jsx(P,{className:"w-4 h-4"}),t?"Update Story":"Publish Story"]})})]})]})}function A({children:s,story:t,onOpenChange:r}){const[a,l]=m.useState(!1),x=g=>{l(g),r&&r(g)};return e.jsxs(Q,{open:a,onOpenChange:x,children:[e.jsx(Z,{asChild:!0,children:s||e.jsxs(f,{className:"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 text-primary-foreground shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Share Your Story"]})}),e.jsxs(J,{className:"sm:max-w-[700px] max-h-[85vh] overflow-hidden bg-gradient-to-br from-background via-background to-accent/5 border-0 shadow-2xl rounded-3xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/10 pointer-events-none"}),e.jsx(X,{className:"relative z-10 pb-6 border-b border-border/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-primary/10 to-accent/20 ring-1 ring-primary/20",children:t?e.jsx(q,{className:"w-6 h-6 text-primary"}):e.jsx(P,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text",children:t?"Edit Your Story":"Create Your Story"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t?"Update your story and share your journey":"Share your mental health journey with others"})]})]})}),e.jsx("div",{className:"relative z-10 max-h-[65vh] overflow-y-auto scrollbar-thin pr-2",children:e.jsx("div",{className:"py-4",children:e.jsx(fe,{story:t,onClose:()=>x(!1)})})})]})]})}function ve(){const{theme:s,setTheme:t}=K();return e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>t(s==="light"?"dark":"light"),className:"w-full justify-start",children:[e.jsx(me,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(de,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"ml-2",children:s==="light"?"Switch to Dark":"Switch to Light"})]})}function be(){const{profile:s,isAuthenticated:t,isAdmin:r,logout:a}=D();return m.useState(!1),e.jsx("header",{className:"sticky top-0 z-50 w-full bg-[#025803] border-b border-[#025803]/20 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-14 px-4 max-w-full",children:[e.jsx("div",{className:"flex items-center space-x-4 min-w-0 flex-shrink-0",children:e.jsxs(h,{to:"/",className:"flex items-center space-x-3 group",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:"/assets/OurMinds.png",alt:"Our Minds Logo",className:"h-8 w-8 rounded-md object-cover group-hover:opacity-90 transition-all duration-200"})}),e.jsx("span",{className:"text-xl font-bold text-white tracking-tight hidden sm:block group-hover:text-white/90 transition-colors",children:"OUR MINDS"})]})}),e.jsx("div",{className:"flex items-center justify-center flex-1",children:e.jsxs("nav",{className:"hidden lg:flex items-center space-x-1",children:[e.jsx(h,{to:"/",className:"px-4 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:"Home"}),e.jsx(h,{to:"/about",className:"px-4 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:"About"}),!t&&e.jsx(h,{to:"/login",className:"px-4 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",children:"Login"})]})}),e.jsx("div",{className:"flex items-center space-x-3 flex-shrink-0",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(A,{children:e.jsxs(f,{variant:"outline",size:"sm",className:"group relative overflow-hidden bg-white/95 text-[#025803] border-2 border-white/20 hover:bg-white hover:border-white hover:shadow-lg hover:shadow-white/20 transition-all duration-300 h-10 px-5 font-semibold text-sm backdrop-blur-sm hover:scale-105 active:scale-95",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:16,className:"transition-transform duration-300 group-hover:rotate-12"}),e.jsx("span",{className:"relative z-10",children:"Share"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})})}),e.jsx("div",{className:"sm:hidden",children:e.jsx(A,{children:e.jsx(f,{variant:"ghost",size:"sm",className:"group relative p-2.5 text-white hover:bg-white/15 rounded-xl transition-all duration-300 hover:scale-110 active:scale-95",children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{size:18,className:"transition-transform duration-300 group-hover:rotate-12"}),e.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full scale-0 group-hover:scale-100 transition-transform duration-300 -z-10"})]})})})}),e.jsxs(te,{children:[e.jsx(ae,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",className:"p-1 rounded-full hover:bg-white/10",children:s?.profileImage?e.jsx("img",{src:s.profileImage,alt:s.name,className:"h-8 w-8 rounded-full object-cover"}):e.jsx("span",{className:"h-8 w-8 rounded-full bg-white flex items-center justify-center text-sm font-semibold text-[#025803]",children:s?.name?.charAt(0)||"U"})})}),e.jsxs(se,{align:"end",className:"w-56 mt-2",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"font-medium",children:s?.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s?.email})]})}),e.jsx(L,{}),e.jsx(T,{asChild:!0,children:e.jsx(h,{to:"/profile",className:"cursor-pointer",children:"Profile"})}),r&&e.jsx(T,{asChild:!0,children:e.jsx(h,{to:"/admin",className:"cursor-pointer",children:"Admin Panel"})}),e.jsx(L,{}),e.jsx("div",{className:"p-1",children:e.jsx(ve,{})}),e.jsx(L,{}),e.jsx(T,{onClick:()=>a(),className:"cursor-pointer",children:"Log out"})]})]})]}):e.jsx(h,{to:"/login",children:e.jsx(f,{variant:"default",size:"sm",className:"bg-white text-[#025803] hover:bg-white/90 font-medium px-5 h-9",children:"Sign in"})})})]})})}function ye({className:s}){const t=F(),{isAuthenticated:r,user:a}=D(),[l,x]=m.useState(0),{data:g,refetch:o}=oe({queryKey:["unreadMessages",a?.id],queryFn:async()=>{if(!a)return[];console.log("Fetching unread messages for user:",a.id);try{const{data:n,error:u}=await p.from("chat_threads").select("id").or(`user_id.eq.${a.id},consultant_id.eq.${a.id}`);if(u)return console.error("Error fetching threads:",u),[];if(!n||n.length===0)return[];const S=n.map(M=>M.id),{data:y,error:N}=await p.from("chat_messages").select("*").in("thread_id",S).neq("sender_id",a.id).eq("read",!1);return N?(console.error("Error fetching unread messages:",N),[]):(console.log("Unread messages:",y?.length||0),y||[])}catch(n){return console.error("Error fetching unread messages:",n),[]}},enabled:!!r&&!!a});m.useEffect(()=>{if(!a)return;const n=p.channel("sidebar-unread-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},u=>{u.new&&u.new.sender_id!==a.id&&(console.log("New message detected, refetching unread count..."),o())}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages",filter:"read=eq.true"},()=>{console.log("Messages marked as read, refetching unread count..."),o()}).subscribe();return()=>{p.removeChannel(n)}},[a,o]),m.useEffect(()=>{g&&x(g.length)},[g]);const b=[{icon:ce,label:"Home",href:"/"},{icon:ne,label:"Chat",href:"/chat",badge:l>0?l:void 0},{icon:le,label:"Consult",href:"/consult"},{icon:ie,label:"Book a session",href:"/book-session"}];return e.jsx("aside",{className:E("w-12 md:w-48 h-full bg-gray-200 dark:bg-[#1a1a1a] border-r border-gray-300 dark:border-[#2a2a2a] flex-shrink-0",s),children:e.jsxs("nav",{className:"flex-1 min-h-0 flex flex-col py-4",children:[e.jsx("ul",{className:"space-y-1 px-1",children:b.map(n=>{const u=t.pathname===n.href||n.href==="/chat"&&t.pathname.startsWith("/chat");return e.jsx("li",{children:e.jsxs(h,{to:n.href,className:E("flex items-center px-2 py-2 rounded-lg transition-colors relative",u?"bg-[#025803] text-white dark:bg-[#025803] dark:text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-[#2a2a2a]","mb-1","w-full"),children:[e.jsx(n.icon,{size:18,className:"min-w-[18px]"}),e.jsx("span",{className:"ml-2 hidden md:block text-sm",children:n.label}),n.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:n.badge})]})},n.href)})}),e.jsxs("div",{className:"mt-auto p-2 border-t border-gray-300 dark:border-[#2a2a2a]",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 hidden md:block",children:"Powered by"}),e.jsx("p",{className:"text-xs font-medium text-[#025803] dark:text-[#025803] hidden md:block",children:"Bornelabs"})]})]})})}const _=768;function je(){const[s,t]=m.useState(void 0);return m.useEffect(()=>{const r=window.matchMedia(`(max-width: ${_-1}px)`),a=()=>{t(window.innerWidth<_)};return r.addEventListener("change",a),t(window.innerWidth<_),()=>r.removeEventListener("change",a)},[]),!!s}function Ie({children:s,showSidebar:t=!0}){const r=je(),a=F();a.pathname.startsWith("/chat");const l=x=>x==="/"?a.pathname==="/":a.pathname.startsWith(x);return e.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-black",children:[e.jsx(be,{}),e.jsxs("div",{className:"flex flex-1 relative min-h-0",children:[t&&!r&&e.jsx("div",{className:"fixed top-14 left-0 h-[calc(100vh-3.5rem)] w-12 md:w-48 bg-gray-200 dark:bg-gray-900 border-r border-gray-300 dark:border-gray-700 z-20",children:e.jsx(ye,{className:"h-full"})}),e.jsx("main",{className:`
          flex flex-col flex-1 min-h-0 relative
          ${!r&&t?"ml-12 md:ml-48":"ml-0"}
          bg-white dark:bg-black
        `,children:s})]}),r&&t&&e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-black border-t border-gray-200 dark:border-gray-700 z-50",children:e.jsxs("div",{className:"flex justify-around items-center py-2 px-4 h-16",children:[e.jsxs(h,{to:"/home",className:`flex flex-col items-center min-w-0 flex-1 transition-colors ${l("/")?"text-mental-green-600 dark:text-mental-green-400":"text-gray-500 dark:text-gray-400 hover:text-mental-green-600 dark:hover:text-mental-green-400"}`,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsx("span",{className:"text-xs mt-1",children:"Home"})]}),e.jsxs(h,{to:"/chat",className:`flex flex-col items-center min-w-0 flex-1 transition-colors ${l("/chat")?"text-mental-green-600 dark:text-mental-green-400":"text-gray-500 dark:text-gray-400 hover:text-mental-green-600 dark:hover:text-mental-green-400"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),e.jsx("span",{className:"text-xs mt-1",children:"Chat"})]}),e.jsxs(h,{to:"/consult",className:`flex flex-col items-center min-w-0 flex-1 transition-colors ${l("/consult")?"text-mental-green-600 dark:text-mental-green-400":"text-gray-500 dark:text-gray-400 hover:text-mental-green-600 dark:hover:text-mental-green-400"}`,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 1 0 7.75"})]}),e.jsx("span",{className:"text-xs mt-1",children:"Consult"})]}),e.jsxs(h,{to:"/book-session",className:`flex flex-col items-center min-w-0 flex-1 transition-colors ${l("/book-session")?"text-mental-green-600 dark:text-mental-green-400":"text-gray-500 dark:text-gray-400 hover:text-mental-green-600 dark:hover:text-mental-green-400"}`,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),e.jsx("span",{className:"text-xs mt-1",children:"Book"})]})]})})]})}export{q as B,A as C,Ie as L,P as S,je as u};
