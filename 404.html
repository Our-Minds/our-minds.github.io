<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
    <script>
      // Enhanced GitHub Pages 404 redirect script for SPA
      (function() {
        // Check if we're already being redirected
        if (sessionStorage.redirect) {
          return;
        }
        
        var l = location;
        var path = l.pathname;
        
        // Don't redirect if we're already at root
        if (path === '/' || path === '') {
          return;
        }
        
        // Store the full path info for later restoration
        var fullPath = path + (l.search || '') + (l.hash || '');
        
        // Use session storage as backup
        sessionStorage.redirect = l.href;
        
        // Encode the current path info for index.html to decode
        var encodedPath = encodeURIComponent(fullPath);
        
        // Redirect to root with encoded path as query parameter
        var redirectUrl = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + 
          '/?p=/' + encodedPath;
        
        window.location.replace(redirectUrl);
      })();
    </script>
  </head>
  <body>
    <p>Redirecting to app...</p>
  </body>
</html>